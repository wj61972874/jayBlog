<section
  class="flex flex-col content-between justify-between flex min-h-[240px] w-full flex-col content-between justify-between gap-[24px]"
>
  <h5
    class="z-10 flex w-full justify-between text-[14px] font-semibold uppercase"
  >
    <div>性格</div>
    <div class="opacity-50">personality</div>
  </h5>
  <div
    class="flex flex-col items-center justify-between space-x-[0] space-y-[10px] overflow-auto text-[#343c4b] md:flex-row md:items-stretch md:space-x-[24px] md:space-y-[0]"
  >
    <!--性格统计-->
    <div class="order-1 text-[0] md:order-1">
      <div
        class="relative w-[400px] h-full overflow-hidden rounded-md bg-white px-[30px] py-[20px] before:absolute before:left-0 before:right-0 before:top-0 before:z-[2] before:h-[5px] before:bg-[#4298b4] before:content-[''] hover:shadow-md"
      >
        <div class="relative z-[2] flex flex-col items-center justify-center">
          <header class="flex flex-col items-center justify-center">
            <h3 class="mb-2 text-base font-normal opacity-70">性格类型：</h3>
            <h4 class="mb-3 text-xl font-semibold">
              <a
                class="group/more flex cursor-pointer items-center justify-between"
                target="_blank"
                rel="noreferrer"
                href="https://www.16personalities.com/ch/isfj-%E4%BA%BA%E6%A0%BC"
                aria-hidden
              >
                冒险家<span class="ml-1">(ISFP-T)</span>
              </a>
            </h4>
          </header>
          <div class="mb-5">
            <div aria-label="ISFJ的头像">
              <img
                src="../../../assets/images/ISFP_male.png"
                alt="ISFJ的头像"
                class="w-[100px] h-[100px] rounded-full"
              />
            </div>
          </div>
          <div class="mb-0">
            <p class="mb-1 text-base">
              作为一位
              ENFJ型（主人公）个体，你散发出独特的魅力、同理心和理想主义，这让你在任何群体中都显得格外耀眼。你天生具备激励和引领他人的才能，与之相伴的是你内心深处的强烈愿望——对周围的世界产生积极的影响。你擅长洞察他人的情感和动机，往往在他人还未意识到自己的需求之前，你就已经敏锐地捕捉到了。
            </p>
            <p class="mb-0 line-clamp-4 text-base">
              你的沟通技巧让你能够满怀激情和信念地阐述自己的愿景，吸引他人加入你的行列，并激励他们投身于你的事业。你在充满意义的人际互动中蓬勃发展，拥有激发周围人最大潜能的非凡能力。然而，当现实与你的高期望相去甚远时，你的理想主义天性有时会让你感到挫败。
            </p>
          </div>
        </div>
        <div
          class="absolute -left-[1px] -right-[1px] top-0 z-[1] rounded-t-sm bg-[#ecf4f7] pt-[155px]"
        >
          <svg
            height="30"
            viewBox="0 0 399 30"
            width="399"
            preserveAspectRatio="none"
            xmlns="http://www.w3.org/2000/svg"
            class="inline-block h-[33px] w-full bg-white"
          >
            <path
              data-v-415a60a8=""
              d="M400 0v16L326.316 5 94.736 20 0 0z"
              fill="#ecf4f7"
              fill-rule="evenodd"
            ></path>
          </svg>
        </div>
      </div>
    </div>

    <!--性格详情-->
    <div class="order-2 flex-1 text-[0] md:order-2">
      <div
        class="flex h-full flex-col rounded-md bg-white py-[15px] hover:shadow-md"
      >
        <h3
          class="relative mb-6 px-[25px] text-lg font-semibold after:absolute after:-bottom-3 after:left-0 after:right-0 after:h-[1px] after:bg-[#eee] after:content-['']"
        >
          <span>性格特征：</span>
        </h3>
        <div
          class="mb-auto flex flex-1 justify-between gap-x-0 pl-[17px] pr-[25px]"
        >
          <!--性格类型列表-->
          <div class="grid flex-1 grid-rows-5 gap-y-2 rounded-lg">
            @for (personality of personalities; track $index) {
            <div
              [ngClass]="{
                  'flex flex-col items-start justify-between gap-y-1 rounded-l-md p-[8px] pr-[25px] hover:bg-[#F6F6F7]':true,
                  'bg-[#F6F6F7]':  selectType === personality.type,
                }"
              (mouseover)="setSelectType(personality.type)"
            >
              <div class="flex items-center justify-start">
                <span class="text-sm">{{ personality.title }}：</span>
                <h4 class="text-sm font-semibold">
                  <span [ngStyle]="{ color: personality.color }">
                    {{ personality.percent }}
                  </span>
                  {{ personality.zhContent }}
                </h4>
              </div>
              <div
                class="flex w-full flex-1 items-center justify-between gap-x-5 min-h-[28.5px]"
              >
                <div
                  [ngClass]="{
                  'fflex w-[80px] items-center justify-start gap-x-1 whitespace-nowrap text-base':true,
                  'font-medium':   personality.enOptions[0] ===
                              personality.enContent,
                  'opacity-50':   personality.enOptions[0] !==
                              personality.enContent,
                }"
                >
                  <span>{{ personality.options[0] }}</span>
                  <span>
                    {{
                      personality.enOptions[0] === personality.enContent
                        ? personality.value
                        : 100 - personality.value
                    }}
                    %
                  </span>
                </div>
                <span class="relative h-[14px] flex-1 rounded-md bg-black/10">
                  <i
                    [ngClass]="{
                        'absolute top-0 h-full rounded-md':true,
                        'left-0':   personality.enOptions[0] !==
                              personality.enContent,
                        'right-0':   personality.enOptions[1] !==
                              personality.enContent,
                      }"
                    [ngStyle]="{
                      width: personality.value + '%',
                      backgroundColor: personality.color
                    }"
                  ></i>
                </span>
                <div
                  [ngClass]="{
                        'flex w-[80px] items-center justify-end gap-x-1 whitespace-nowrap text-base':true,
                        'font-medium':   personality.enOptions[1] !==
                              personality.enContent,
                        'opacity-50':   personality.enOptions[1] !==
                              personality.enContent,
                      }"
                >
                  <span>{{ personality.options[1] }}</span>
                  <span>
                    {{
                      personality.enOptions[1] === personality.enContent
                        ? personality.value
                        : 100 - personality.value
                    }}
                    %
                  </span>
                </div>
              </div>
            </div>
            }
          </div>

          <!--性格类型描述-->
          <div
            [ngClass]="{
                  'flex w-[228px] flex-col items-center justify-start rounded-lg bg-[#F6F6F7] p-[20px]':true,
                  'rounded-tl-none':  typeData.type === personalities[0].type,
                  'rounded-bl-none':  typeData.type ===
                      personalities[personalities.length - 1].type,
                }"
          >
            <header class="mb-5">
              <p class="mb-1 text-center text-sm">{{ typeData.title }}</p>
              <h4 class="text-center text-xl font-semibold">
                <a
                  class="inline-flex cursor-pointer items-center justify-between gap-x-2"
                  target="_blank"
                  rel="noreferrer"
                  [href]="typeData.link"
                  aria-hidden
                >
                  <span [ngStyle]="{ color: typeData.color }">
                    {{ typeData.percent }}
                  </span>
                  <span>{{ typeData.zhContent }}</span>
                </a>
              </h4>
            </header>
            <div class="mb-5 flex flex-col items-center justify-start">
              <img
                [src]="typeData.image"
                [alt]="typeData.desc"
                class="h-[120px] w-[160px]"
              />
            </div>
            <p class="text-left text-base">{{ typeData.desc }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="z-10 flex items-center justify-start gap-2">
    <a
      class="group/more flex cursor-pointer items-center justify-between gap-2 opacity-70"
      target="_blank"
      rel="noreferrer"
      href="https://www.16personalities.com/profiles/b0ba8dad73f80"
      aria-hidden
    >
      <span
        class="bg-gradient-to-r from-[rgb(255_255_255_/_50%)] to-[rgb(255_255_255_/_50%)] bg-[length:0_1px] bg-[left_100%] bg-no-repeat text-[12px] leading-[18px] transition-all group-hover/more:bg-[length:100%_1px]"
      >
        查看详细信息
      </span>
    </a>
  </div>
</section>
